/*!Warning!:Please don't modify this file,this is generated by tools!*/
/********************************************************************
File name: BinSig_Reverse.c
Author: Stephen Du
Version: V2.0
Timestamp: 2019-01-17 17:19:13
Description:
Others:
Function List:
1. ....
History: /
1. Date:
Author:
Modification:
2. ...
********************************************************************/
#if(STD_ON == BINSIG_REVERSE_MODULE_ACTIVE)
#include "BinSig_Reverse_Cfg.h"
#include "System_Signal.h"
#include "trace.h"

#define BINSIG_REVERSE_INITIALIZE 0XFFFFFFFF
#endif

/*
*@par Service ID[hex]
*0X0
*@par Sync/Async
*Synchronous
*@par Reentrancy
*Reentrant
*@param[in] None
*
*@param[inout] None
*
*@param[out] None
*
*@retval None
*
*Scanf the signal periodically and do the debouncer.
*/
void BinSig_Reverse_Scan(void)
{
#if(STD_ON == BINSIG_REVERSE_MODULE_ACTIVE)
    boolean l_portState;
    static uint8 l_sampleCounter = BINSIG_REVERSE_FILTER_TIME;
    uint32 l_value = BINSIG_REVERSE_INITIALIZE;

    l_portState = BINSIG_REVERSE_GET_PORT_VALUE;
    if (0 != l_sampleCounter) {
        l_sampleCounter--;
    }
    if (0 == l_sampleCounter) {
        if ((E_OK == System_Signal_Receive(SYSTEM_SIG_ID_REVERSE, &l_value)) && (l_value != l_portState)) {
#if (STD_ON == BINSIG_REVERSE_DEBUG_TRACE)
            TracePrintf(INPUT_TRACE, TRACE_INFO, "[BinSig-I]:Signal Reverse state changed\r\n");
#endif
            System_Signal_Send(SYSTEM_SIG_ID_REVERSE, l_portState, STD_OFF);
        }
    }
    if ((E_OK == System_Signal_Receive(SYSTEM_SIG_ID_REVERSE, &l_value)) && (l_value == l_portState)) {
        l_sampleCounter = BINSIG_REVERSE_FILTER_TIME;
    }
#endif
}
/*=========================== END OF FILE: BinSig_Reverse.c ===========================*/
